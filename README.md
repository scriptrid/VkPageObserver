 # VK Page Observer
## О проекте

Данное приложение позволяет следить за изменениями профилей в ВКонтакте.
В данном проекте реализована система регистрации/логина пользователей с последующей возможностью добавления, получения, удаления отслеживаемых страниц ВКонтакте.

У каждого пользователся свой личный список.

Обновление информации о страницах производится с задаваемой периодичностью.
Изменения страницы сохраняются в базе данных.


## Использование
### Список конечных точек (endpoints):
#### Создание пользователя
```http request
POST /api/user/register
Content-Type: application/json

{
    "username": "username",
    "password": "password"
}
```
Данный метод создает в базе данных нового пользователя с указанными никнеймом и паролем и сразу его авторизует.

#### Логин
```http request
POST /api/user/login
Content-Type: application/json

{
    "username": "username",
    "password": "password"
}
```

Проводит авторизацию пользователя

#### Добавление страницы в список отслеживаемых
```http request
POST /api/page

Path variable: "pageId"
Type: integer
Required: required

Cookie: required
```
Добавляет пользователю в список отслеживаемых страниц новую страницу.

Если страницы нет в базе данных VK, возвращается код 400 (Bad request)

После успешного добавления страницы возвращается 200(OK)

#### Получение страницы из списка отслеживаемых
```http request
GET /api/page

Path variable: "pageId"
Type: integer
Required: required

Cookie: required
```
Добавляет пользователю в список отслеживаемых страниц новую страницу.

Если страницы нет в списке отслеживаемых, возвращается код 404 (Not Found)

После запроса имеющейся у пользователся в списке страницы возвращются данные о странице в формате JSON:
```
{
    "firstName": "newName",
    "lastName": "newLastName",
    "bDate": "17.4",
    "location": "nameOfCity",
    "changes": [
        {
            "timeOfChange": "2023-02-15T15:30:50.376848+03:00",
            "before": "oldName",
            "after": "newName"
        },
        {
            "timeOfChange": "2023-02-15T15:30:45.048154+03:00",
            "before": "oldLastName",
            "after": "NewLastName"
        },
        {
            "timeOfChange": "2023-02-15T15:30:39.992149+03:00",
            "before": "17.4.2021",
            "after": "17.4"
        },
        {
            "timeOfChange": "2023-02-15T15:30:32.669043+03:00",
            "before": "12.4.2011",
            "after": "17.4.2021"
        }
    ]
}
```

Данные об изменениях страницы отсортированы "от новых к старым".

#### Удаление страницы из списка отслеживаемых
```http request
DELETE /api/page

Path variable: "pageId"
Type: integer
Required: required

Cookie: required
```

Удаляет имеющуюся в списке страницу только у авторизованного пользователя.

При успешном удалении возвращается код 204(No content)

Если страницы нет в списке, возвращается 404(Not found)